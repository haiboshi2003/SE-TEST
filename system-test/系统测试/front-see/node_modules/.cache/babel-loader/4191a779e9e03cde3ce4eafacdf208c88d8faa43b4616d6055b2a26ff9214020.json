{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-19d213c8\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"contain2\"\n};\nconst _hoisted_2 = {\n  class: \"putbutton\"\n};\nconst _hoisted_3 = {\n  class: \"showimg\"\n};\nconst _hoisted_4 = {\n  class: \"building\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"building\"\n};\nconst _hoisted_7 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"input\", {\n    id: \"btn_file\",\n    type: \"file\",\n    onChange: $setup.handleFileChange,\n    style: {\n      \"display\": \"none\"\n    },\n    accept: \"image/jpeg\"\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"button\", {\n    onClick: $setup.handleSelectFile,\n    class: \"my_button\"\n  }, \"上传图片\"), _createElementVNode(\"button\", {\n    onClick: $setup.handleButtonClick2,\n    class: \"my_button\"\n  }, \"检测\")]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" <div class=\\\"mybutton\\\" @click=\\\"handleButtonClick2\\\"></div> \"), $setup.selectedFile ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $setup.previewUrl,\n    alt: \"Selected Image\",\n    class: \"scaled-image\"\n  }, null, 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_6, [$setup.imagePath ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $setup.imagePath,\n    alt: \"Detected Image\",\n    class: \"scaled-image\"\n  }, null, 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","id","type","onChange","$setup","handleFileChange","style","accept","onClick","handleSelectFile","handleButtonClick2","_hoisted_3","_hoisted_4","_createCommentVNode","selectedFile","key","src","previewUrl","alt","_hoisted_5","_hoisted_6","imagePath","_hoisted_7"],"sources":["H:\\GitHub-Repository\\SSE-TongJi\\软件工程\\课程设计\\see\\src\\components\\SvmTest.vue"],"sourcesContent":["<template>\r\n  <div class=\"contain2\">\r\n    <div class=\"putbutton\">\r\n      <input\r\n        id=\"btn_file\"\r\n        type=\"file\"\r\n        @change=\"handleFileChange\"\r\n        style=\"display: none\"\r\n        accept=\"image/jpeg\"\r\n      />\r\n      <button @click=\"handleSelectFile\" class=\"my_button\">上传图片</button>\r\n\r\n      <button @click=\"handleButtonClick2\" class=\"my_button\">检测</button>\r\n    </div>\r\n    <div class=\"showimg\">\r\n      <div class=\"building\">\r\n        <!-- <div class=\"mybutton\" @click=\"handleButtonClick2\"></div> -->\r\n        <img\r\n          v-if=\"selectedFile\"\r\n          :src=\"previewUrl\"\r\n          alt=\"Selected Image\"\r\n          class=\"scaled-image\"\r\n        />\r\n      </div>\r\n      <div class=\"building\">\r\n        <img\r\n          :src=\"imagePath\"\r\n          alt=\"Detected Image\"\r\n          class=\"scaled-image\"\r\n          v-if=\"imagePath\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { message } from \"ant-design-vue\";\r\n\r\nconst imagePath = ref(null);\r\nconst selectedFile = ref(null);\r\n\r\nconst uploadImage = async () => {\r\n  const formData = new FormData();\r\n  formData.append(\"file\", selectedFile.value);\r\n\r\n  try {\r\n    const response = await axios.post(\"http://localhost:7078/svm\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n\r\n    imagePath.value = `data:image/jpeg;base64,` + response.data.imageBase64;\r\n    console.log(imagePath.value);\r\n    console.log(imagePath.value);\r\n    //console.log(imagePath.value);\r\n  } catch (error) {\r\n    console.error(\"Error uploading image:\", error);\r\n  }\r\n};\r\n\r\n//选择图片的预览部分\r\nconst previewUrl = ref(null);\r\n\r\nconst handleFileChange = (event) => {\r\n  selectedFile.value = event.target.files[0];\r\n\r\n  if (selectedFile.value) {\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = () => {\r\n      previewUrl.value = reader.result;\r\n    };\r\n\r\n    reader.readAsDataURL(selectedFile.value);\r\n  }\r\n};\r\n\r\n//按钮\r\n\r\nconst handleButtonClick2 = () => {\r\n  if (selectedFile.value) {\r\n    uploadImage();\r\n  } else {\r\n    message.warning(\"image is empty\");\r\n  }\r\n};\r\n\r\nfunction handleSelectFile() {\r\n  document.getElementById(\"btn_file\").click();\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.contain2 {\r\n  width: 70%;\r\n  height: 90%;\r\n  position: fixed;\r\n  display: flex;\r\n  flex-direction: column;\r\n  top: 1%; /* 向下移动 20px */\r\n  right: 8%; /* 向左移动 20px */\r\n}\r\n\r\n.putbutton {\r\n  /* background-color: #000; */\r\n  margin-top: 3px;\r\n  padding-left: 70%;\r\n}\r\n.showimg {\r\n  /* background-color: aqua; */\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.building {\r\n  background-color: rgba(255, 255, 255, 0.85);\r\n  border: 1px solid #000; /* 黑色边框 */\r\n\r\n  padding: 10px; /* 内边距，使内容不贴紧边框 */\r\n\r\n  /* margin: 200px auto; */\r\n  margin: 12% 0 0 10%;\r\n  width: 450px;\r\n  height: 400px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center; /* 水平居中 */\r\n  align-items: center; /* 垂直居中 */\r\n}\r\n\r\n.scaled-image {\r\n  max-width: 100%; /* 设置最大宽度为父元素宽度 */\r\n  max-height: 100%; /* 设置最大高度为父元素高度 */\r\n  object-fit: contain; /* 保持图像的纵横比，完全适应元素框，可能会在父元素内留有空白 */\r\n  padding: 0px;\r\n  object-position: center center; /* 图像在其容器中垂直和水平居中 */\r\n}\r\n\r\n.my_button {\r\n  color: #333333;\r\n  background-color: #fff;\r\n  padding: 10px 30px;\r\n  margin-right: 10%;\r\n  outline: none;\r\n  border: 1px solid #ccc;\r\n}\r\n\r\n.my_button:hover {\r\n  background-color: rgb(10, 150, 139); /* 将悬停背景颜色设为蓝色 */\r\n  cursor: pointer; /* 将鼠标指针形状设置为手形 */\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAU;;EACdA,KAAK,EAAC;AAAW;;EAYjBA,KAAK,EAAC;AAAS;;EACbA,KAAK,EAAC;AAAU;mBAf3B;;EAwBWA,KAAK,EAAC;AAAU;mBAxB3B;;uBACEC,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJC,mBAAA,CAWM,OAXNC,UAWM,GAVJD,mBAAA,CAME;IALAE,EAAE,EAAC,UAAU;IACbC,IAAI,EAAC,MAAM;IACVC,QAAM,EAAEC,MAAA,CAAAC,gBAAgB;IACzBC,KAAqB,EAArB;MAAA;IAAA,CAAqB;IACrBC,MAAM,EAAC;qCAETR,mBAAA,CAAiE;IAAxDS,OAAK,EAAEJ,MAAA,CAAAK,gBAAgB;IAAEb,KAAK,EAAC;KAAY,MAAI,GAExDG,mBAAA,CAAiE;IAAxDS,OAAK,EAAEJ,MAAA,CAAAM,kBAAkB;IAAEd,KAAK,EAAC;KAAY,IAAE,E,GAE1DG,mBAAA,CAkBM,OAlBNY,UAkBM,GAjBJZ,mBAAA,CAQM,OARNa,UAQM,GAPJC,mBAAA,kEAAiE,EAEzDT,MAAA,CAAAU,YAAY,I,cADpBjB,mBAAA,CAKE;IAtBVkB,GAAA;IAmBWC,GAAG,EAAEZ,MAAA,CAAAa,UAAU;IAChBC,GAAG,EAAC,gBAAgB;IACpBtB,KAAK,EAAC;0BArBhBuB,UAAA,KAAAN,mBAAA,e,GAwBMd,mBAAA,CAOM,OAPNqB,UAOM,GAFIhB,MAAA,CAAAiB,SAAS,I,cAJjBxB,mBAAA,CAKE;IA9BVkB,GAAA;IA0BWC,GAAG,EAAEZ,MAAA,CAAAiB,SAAS;IACfH,GAAG,EAAC,gBAAgB;IACpBtB,KAAK,EAAC;0BA5BhB0B,UAAA,KAAAT,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}